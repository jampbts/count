name: YouTube Weekly Stats

on:
schedule:
- cron: "0 15 * * 2" # 火曜15:00 UTC = 水曜0:00 JST
workflow_dispatch: # 手動実行も可能

jobs:
build:
runs-on: ubuntu-latest
steps:
- name: Checkout repository
uses: actions/checkout@v3

- name: Set up Python
  uses: actions/setup-python@v4
  with:
    python-version: '3.10'

- name: Install dependencies
  run: |
    pip install google-api-python-client requests

- name: Run script and generate HTML
  run: python script.py
  env:
    YOUTUBE_API_KEY: ${{ secrets.YOUTUBE_API_KEY }}

- name: Deploy to gh-pages
  uses: peaceiris/actions-gh-pages@v3
