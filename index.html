<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="styleswwt" src="style.css">
    <title>My Website</title>

</head>
<body>

    <h1>私のウェブサイト</h1>
  <div class="flex-column">
    <iframe height="80px" width="100%" frameborder="0" src=https://livecounts.io/embed/youtube-live-view-counter/iy9qZR_OGa0 style="border: 0; width:100%; height:80px;"></iframe>
    <iframe height="80px" width="100%" frameborder="0" src=https://livecounts.io/embed/youtube-live-view-counter/uVD-YgzDzyY style="border: 0; width:100%; height:80px;"></iframe>
    <iframe height="80px" width="100%" frameborder="0" src=https://livecounts.io/embed/youtube-live-view-counter/IX1dkYoLHVs style="border: 0; width:100%; height:80px;"></iframe>
    <iframe height="80px" width="100%" frameborder="0" src=https://livecounts.io/embed/youtube-live-view-counter/qGjAWJ2zWWI style="border: 0; width:100%; height:80px;"></iframe>
    <iframe height="80px" width="100%" frameborder="0" src=https://livecounts.io/embed/youtube-live-view-counter/_Zgc12yL5ss style="border: 0; width:100%; height:80px;"></iframe>
    <iframe height="80px" width="100%" frameborder="0" src=https://livecounts.io/embed/youtube-live-view-counter/3Y_Eiyg4bfk style="border: 0; width:100%; height:80px;"></iframe>
    <iframe height="80px" width="100%" frameborder="0" src=https://livecounts.io/embed/youtube-live-view-counter/PV1gCvzpSy0 style="border: 0; width:100%; height:80px;"></iframe>

  </div>

    <!-- データ表示用のコンテナ -->
    <div id="youtube-stats-container" class="stats-container">
        <h2>YouTube 再生回数</h2>
        <p id="last-updated"></p>
        <div id="stats-table-wrapper"></div>
        <p id="loading-message">データを読み込み中...</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('youtube-stats-container');
            const tableWrapper = document.getElementById('stats-table-wrapper');
            const loadingMessage = document.getElementById('loading-message');
            const lastUpdatedElement = document.getElementById('last-updated');

            fetch('https://jampbts.github.io/count/data.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    // 日付を表示
                    lastUpdatedElement.textContent = `最終更新日: ${data.date}`;
                    
                    // テーブルを動的に生成
                    let tableHTML = '<table class="stats-table"><tr><th>タイトル</th><th>今週の増加数</th><th>累計再生回数</th></tr>';
                    let total_week = 0;
                    let total_all = 0;

                    data.videos.forEach(video => {
                        total_week += video.views_this_week;
                        total_all += video.views_total;
                        tableHTML += `<tr>
                            <td>${video.title}</td>
                            <td>${video.views_this_week.toLocaleString()}</td>
                            <td>${video.views_total.toLocaleString()}</td>
                        </tr>`;
                    });

                    // 合計行を追加
                    tableHTML += `<tr>
                        <td><strong>合計</strong></td>
                        <td><strong>${total_week.toLocaleString()}</strong></td>
                        <td><strong>${total_all.toLocaleString()}</strong></td>
                    </tr>`;

                    tableHTML += '</table>';
                    tableWrapper.innerHTML = tableHTML;
                    loadingMessage.style.display = 'none'; // 読み込みメッセージを非表示
                })
                .catch(error => {
                    console.error('データの取得中にエラーが発生しました:', error);
                    loadingMessage.textContent = 'データの読み込みに失敗しました。';
                });
        });
    </script>

</body>
</html>
